{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport React, { useEffect, useRef, useState } from \"react\";\n\nconst useHackerNewsAPI = () => {\n  _s();\n\n  const [hits, setHits] = useState([]);\n  const handleFetchData = useRef({}); //useRef luu cac gia tri ben ngoai compo, o truong hop nay la query\n\n  const [loading, setLoading] = useState(true);\n  const [url, setUrl] = useState(`https://hn.algolia.com/api/v1/search?query='${query}'`); //useREf for hackerNEw\n\n  const isMounted = useRef(true);\n  useEffect(() => {\n    //\n    return () => {\n      isMounted.current = false; //khi compo bị unmount thì sẽ là giá trị false\n    };\n  }, []);\n\n  handleFetchData.current = async () => {\n    setLoading(true);\n\n    try {\n      const response = await axios.get(url); // console.table(response.data.hits);\n\n      if (isMounted) {\n        var _response$data;\n\n        setHits(((_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.hits) || []);\n        setLoading(false);\n      }\n    } catch {\n      setLoading(true);\n      throw new Error(\"something happened with api\");\n    }\n  };\n\n  useEffect(() => {\n    handleFetchData.current();\n  }, [url]); // const handleUpdateQuery = lodash.debounce((e) => {\n  //   setQuery(e.target.value);\n  // }, 500);\n\n  return {\n    query,\n    setQuery,\n    setUrl,\n    loading,\n    hits\n  };\n};\n\n_s(useHackerNewsAPI, \"0wiLkTz71ElgCvdO038kygyEq7s=\");\n\nexport default useHackerNewsAPI;","map":{"version":3,"sources":["/Users/khai/Library/Mobile Documents/com~apple~CloudDocs/Desktop/WORKSPACE/REACT-BIG/React-evon/my-app/src/hooks/useHackerNewsAPI.js"],"names":["axios","React","useEffect","useRef","useState","useHackerNewsAPI","hits","setHits","handleFetchData","loading","setLoading","url","setUrl","query","isMounted","current","response","get","data","Error","setQuery"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,IAAgBC,SAAhB,EAA2BC,MAA3B,EAAmCC,QAAnC,QAAmD,OAAnD;;AAEA,MAAMC,gBAAgB,GAAG,MAAM;AAAA;;AAC7B,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBH,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAMI,eAAe,GAAGL,MAAM,CAAC,EAAD,CAA9B,CAF6B,CAEO;;AACpC,QAAM,CAACM,OAAD,EAAUC,UAAV,IAAwBN,QAAQ,CAAC,IAAD,CAAtC;AACA,QAAM,CAACO,GAAD,EAAMC,MAAN,IAAgBR,QAAQ,CAC3B,+CAA8CS,KAAM,GADzB,CAA9B,CAJ6B,CAO7B;;AACA,QAAMC,SAAS,GAAGX,MAAM,CAAC,IAAD,CAAxB;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACd;AACA,WAAO,MAAM;AACXY,MAAAA,SAAS,CAACC,OAAV,GAAoB,KAApB,CADW,CACgB;AAC5B,KAFD;AAGD,GALQ,EAKN,EALM,CAAT;;AAOAP,EAAAA,eAAe,CAACO,OAAhB,GAA0B,YAAY;AACpCL,IAAAA,UAAU,CAAC,IAAD,CAAV;;AACA,QAAI;AACF,YAAMM,QAAQ,GAAG,MAAMhB,KAAK,CAACiB,GAAN,CAAUN,GAAV,CAAvB,CADE,CAEF;;AAEA,UAAIG,SAAJ,EAAe;AAAA;;AACZP,QAAAA,OAAO,CAAC,mBAAAS,QAAQ,CAACE,IAAT,kEAAeZ,IAAf,KAAuB,EAAxB,CAAP;AACAI,QAAAA,UAAU,CAAC,KAAD,CAAV;AACF;AACF,KARD,CAQE,MAAM;AACNA,MAAAA,UAAU,CAAC,IAAD,CAAV;AACA,YAAM,IAAIS,KAAJ,CAAU,6BAAV,CAAN;AACD;AACF,GAdD;;AAgBAjB,EAAAA,SAAS,CAAC,MAAM;AACdM,IAAAA,eAAe,CAACO,OAAhB;AACD,GAFQ,EAEN,CAACJ,GAAD,CAFM,CAAT,CAjC6B,CAqC7B;AACA;AACA;;AAEA,SAAO;AACLE,IAAAA,KADK;AAELO,IAAAA,QAFK;AAGLR,IAAAA,MAHK;AAILH,IAAAA,OAJK;AAKLH,IAAAA;AALK,GAAP;AAOD,CAhDD;;GAAMD,gB;;AAkDN,eAAeA,gBAAf","sourcesContent":["import axios from \"axios\";\nimport React, { useEffect, useRef, useState } from \"react\";\n\nconst useHackerNewsAPI = () => {\n  const [hits, setHits] = useState([]);\n  const handleFetchData = useRef({}); //useRef luu cac gia tri ben ngoai compo, o truong hop nay la query\n  const [loading, setLoading] = useState(true);\n  const [url, setUrl] = useState(\n    `https://hn.algolia.com/api/v1/search?query='${query}'`\n  );\n  //useREf for hackerNEw\n  const isMounted = useRef(true);\n\n  useEffect(() => {\n    //\n    return () => {\n      isMounted.current = false; //khi compo bị unmount thì sẽ là giá trị false\n    };\n  }, []);\n\n  handleFetchData.current = async () => {\n    setLoading(true);\n    try {\n      const response = await axios.get(url);\n      // console.table(response.data.hits);\n\n      if (isMounted) {\n         setHits(response.data?.hits || []);\n         setLoading(false)\n      }\n    } catch {\n      setLoading(true);\n      throw new Error(\"something happened with api\");\n    }\n  };\n\n  useEffect(() => {\n    handleFetchData.current();\n  }, [url]);\n\n  // const handleUpdateQuery = lodash.debounce((e) => {\n  //   setQuery(e.target.value);\n  // }, 500);\n\n  return {\n    query,\n    setQuery,\n    setUrl,\n    loading,\n    hits,\n  };\n};\n\nexport default useHackerNewsAPI;\n"]},"metadata":{},"sourceType":"module"}