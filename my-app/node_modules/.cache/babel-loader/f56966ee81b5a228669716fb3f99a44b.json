{"ast":null,"code":"var _jsxFileName = \"/Users/khai/Library/Mobile Documents/com~apple~CloudDocs/Desktop/WORKSPACE/REACT-BIG/React-evon/my-app/src/context/galleryContext.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport useLocalStorage from \"../hooks/useLocalStorage\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst {\n  createContext,\n  useContext,\n  useState\n} = require(\"react\");\n\nconst fakeData = [{\n  id: 1,\n  url: \"https://images.unsplash.com/photo-1645040643524-8971366b4f68?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1932&q=80\",\n  isFavorite: false\n}, {\n  id: 2,\n  url: \"https://images.unsplash.com/photo-1645088520336-62d94324e869?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470&q=800\",\n  isFavorite: false\n}, {\n  id: 3,\n  url: \"https://images.unsplash.com/photo-1645104787913-aeb889b0e190?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470&q=80\",\n  isFavorite: false\n}, {\n  id: 4,\n  url: \"https://images.unsplash.com/photo-1645069258059-6f5a71256c4a?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1476&q=80\",\n  isFavorite: false\n}, {\n  id: 5,\n  url: \"https://images.unsplash.com/photo-1645105263866-ed2be8e07981?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1853&q=80\",\n  isFavorite: false\n}, {\n  id: 6,\n  url: \"https://images.unsplash.com/photo-1524758631624-e2822e304c36?ixlib=rb-1.2.1&ixid=MnwxMjA3fDF8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470&q=80\",\n  isFavorite: false\n}];\nconst GalleryContext = createContext();\n\nfunction GalleryProvider(props) {\n  _s();\n\n  const {\n    storedValue,\n    setValue\n  } = useLocalStorage(\"photos\", fakeData);\n  const {\n    storedValue: storedCart,\n    setValue: setStoredCart\n  } = useLocalStorage(\"cartItems\", []);\n  const [photos, setPhotos] = useState(storedValue);\n  const [cartItems, setCartItems] = useState(storedCart);\n  const [favoriteList, setFavoriteList] = useState([]);\n\n  function toggleFavorite(photoId) {\n    const updatedArray = photos.map(photo => {\n      if (photo.id === photoId) {\n        return { ...photo,\n          isFavorite: !photo.isFavorite\n        };\n      }\n\n      return photo;\n    });\n    setPhotos(updatedArray);\n    setValue(updatedArray);\n  } // 1. Viết function addToCart\n  // 2. Function addToCart truyền params là photo\n\n\n  function addToCart(newItem) {\n    // 3. Cập nhật lại state giỏ hàng (cartItems)\n    setCartItems(prevItems => {\n      // 4. Kiểm tra sản phẩm đã tồn tại trong giỏ hàng hay chưa\n      const isExisted = prevItems.some(item => item.id === newItem.id);\n      console.log(\"setCartItems ~ isExisted\", isExisted); // 5. Nếu tồn tại thì trả về danh sách trước đó\n\n      if (isExisted) {\n        setStoredCart([...prevItems]);\n        return [...prevItems];\n      } // 6. Chưa tồn tại thì thêm vào giỏ hàng\n\n\n      setStoredCart([...prevItems, newItem]);\n      return [...prevItems, newItem];\n    });\n  }\n\n  function removeFromCart(photoId) {\n    setCartItems(prevItems => {\n      const result = prevItems.filter(item => item.id !== photoId);\n      setStoredCart(result);\n      return result;\n    });\n  }\n\n  const value = {\n    photos,\n    cartItems,\n    favoriteList,\n    toggleFavorite,\n    addToCart,\n    removeFromCart\n  };\n  return /*#__PURE__*/_jsxDEV(GalleryContext.Provider, {\n    value: value,\n    ...props\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 5\n  }, this);\n}\n\n_s(GalleryProvider, \"BLPF6bnxzYKPTLbyxkT5TwBqJM0=\", false, function () {\n  return [useLocalStorage, useLocalStorage];\n});\n\n_c = GalleryProvider;\n\nfunction useGallery() {\n  _s2();\n\n  const context = useContext(GalleryContext);\n  if (typeof context === \"undefined\") throw new Error(\"useGallery must be used within a GalleryProvider\");\n  return context;\n}\n\n_s2(useGallery, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n\nexport { useGallery, GalleryProvider };\n\nvar _c;\n\n$RefreshReg$(_c, \"GalleryProvider\");","map":{"version":3,"sources":["/Users/khai/Library/Mobile Documents/com~apple~CloudDocs/Desktop/WORKSPACE/REACT-BIG/React-evon/my-app/src/context/galleryContext.js"],"names":["useLocalStorage","createContext","useContext","useState","require","fakeData","id","url","isFavorite","GalleryContext","GalleryProvider","props","storedValue","setValue","storedCart","setStoredCart","photos","setPhotos","cartItems","setCartItems","favoriteList","setFavoriteList","toggleFavorite","photoId","updatedArray","map","photo","addToCart","newItem","prevItems","isExisted","some","item","console","log","removeFromCart","result","filter","value","useGallery","context","Error"],"mappings":"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","sourcesContent":["import useLocalStorage from \"../hooks/useLocalStorage\";\n\nconst { createContext, useContext, useState } = require(\"react\");\n\nconst fakeData = [\n  {\n    id: 1,\n    url: \"https://images.unsplash.com/photo-1645040643524-8971366b4f68?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1932&q=80\",\n    isFavorite: false,\n  },\n  {\n    id: 2,\n    url: \"https://images.unsplash.com/photo-1645088520336-62d94324e869?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470&q=800\",\n    isFavorite: false,\n  },\n  {\n    id: 3,\n    url: \"https://images.unsplash.com/photo-1645104787913-aeb889b0e190?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470&q=80\",\n    isFavorite: false,\n  },\n  {\n    id: 4,\n    url: \"https://images.unsplash.com/photo-1645069258059-6f5a71256c4a?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1476&q=80\",\n    isFavorite: false,\n  },\n  {\n    id: 5,\n    url: \"https://images.unsplash.com/photo-1645105263866-ed2be8e07981?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1853&q=80\",\n    isFavorite: false,\n  },\n  {\n    id: 6,\n    url: \"https://images.unsplash.com/photo-1524758631624-e2822e304c36?ixlib=rb-1.2.1&ixid=MnwxMjA3fDF8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470&q=80\",\n    isFavorite: false,\n  },\n];\n\nconst GalleryContext = createContext();\nfunction GalleryProvider(props) {\n  const { storedValue, setValue } = useLocalStorage(\"photos\", fakeData);\n  const { storedValue: storedCart, setValue: setStoredCart } = useLocalStorage(\n    \"cartItems\",\n    []\n  );\n  const [photos, setPhotos] = useState(storedValue);\n  const [cartItems, setCartItems] = useState(storedCart);\n  const [favoriteList, setFavoriteList] = useState([]);\n\n  function toggleFavorite(photoId) {\n    const updatedArray = photos.map((photo) => {\n      if (photo.id === photoId) {\n        return { ...photo, isFavorite: !photo.isFavorite };\n      }\n      return photo;\n    });\n    setPhotos(updatedArray);\n    setValue(updatedArray);\n  }\n  // 1. Viết function addToCart\n  // 2. Function addToCart truyền params là photo\n  function addToCart(newItem) {\n    // 3. Cập nhật lại state giỏ hàng (cartItems)\n    setCartItems((prevItems) => {\n      // 4. Kiểm tra sản phẩm đã tồn tại trong giỏ hàng hay chưa\n      const isExisted = prevItems.some((item) => item.id === newItem.id);\n      console.log(\"setCartItems ~ isExisted\", isExisted);\n      // 5. Nếu tồn tại thì trả về danh sách trước đó\n      if (isExisted) {\n        setStoredCart([...prevItems]);\n        return [...prevItems];\n      }\n      // 6. Chưa tồn tại thì thêm vào giỏ hàng\n      setStoredCart([...prevItems, newItem]);\n      return [...prevItems, newItem];\n    });\n  }\n\n  function removeFromCart(photoId) {\n    setCartItems((prevItems) => {\n      const result = prevItems.filter((item) => item.id !== photoId);\n      setStoredCart(result);\n      return result;\n    });\n  }\n\n  const value = {\n    photos,\n    cartItems,\n    favoriteList,\n    toggleFavorite,\n    addToCart,\n    removeFromCart,\n  };\n  return (\n    <GalleryContext.Provider value={value} {...props}></GalleryContext.Provider>\n  );\n}\n\nfunction useGallery() {\n  const context = useContext(GalleryContext);\n  if (typeof context === \"undefined\")\n    throw new Error(\"useGallery must be used within a GalleryProvider\");\n  return context;\n}\nexport { useGallery, GalleryProvider };"]},"metadata":{},"sourceType":"module"}