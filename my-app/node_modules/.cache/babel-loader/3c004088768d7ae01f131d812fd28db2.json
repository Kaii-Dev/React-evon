{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport React, { useEffect, useRef, useState } from \"react\";\n\nconst useHackerNewsAPI = (initialURL, initialData) => {\n  _s();\n\n  const [data, setData] = useState(initialData);\n  const handleFetchData = useRef({}); //useRef luu cac gia tri ben ngoai compo, o truong hop nay la query\n\n  const [loading, setLoading] = useState(true);\n  const [url, setUrl] = useState(`https://hn.algolia.com/api/v1/search?query=''`); //useREf for hackerNEw\n\n  const isMounted = useRef(true);\n  useEffect(() => {\n    //\n    return () => {\n      isMounted.current = false; //khi compo bị unmount thì sẽ là giá trị false\n    };\n  }, []);\n\n  handleFetchData.current = async () => {\n    setLoading(true);\n\n    try {\n      const response = await axios.get(url); // console.table(response.data.hits);\n\n      if (isMounted) {\n        var _response$data;\n\n        setHits(((_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.hits) || []);\n        setLoading(false);\n      }\n    } catch {\n      setLoading(true);\n      throw new Error(\"something happened with api\");\n    }\n  };\n\n  useEffect(() => {\n    handleFetchData.current();\n  }, [url]); // const handleUpdateQuery = lodash.debounce((e) => {\n  //   setQuery(e.target.value);\n  // }, 500);\n\n  return {\n    setUrl,\n    loading,\n    hits\n  };\n};\n\n_s(useHackerNewsAPI, \"fgty5uc7r4pwoesE8Wt6EmOKzDU=\");\n\nexport default useHackerNewsAPI;","map":{"version":3,"sources":["/Users/khai/Library/Mobile Documents/com~apple~CloudDocs/Desktop/WORKSPACE/REACT-BIG/React-evon/my-app/src/hooks/useHackerNewsAPI.js"],"names":["axios","React","useEffect","useRef","useState","useHackerNewsAPI","initialURL","initialData","data","setData","handleFetchData","loading","setLoading","url","setUrl","isMounted","current","response","get","setHits","hits","Error"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,IAAgBC,SAAhB,EAA2BC,MAA3B,EAAmCC,QAAnC,QAAmD,OAAnD;;AAEA,MAAMC,gBAAgB,GAAG,CAACC,UAAD,EAAaC,WAAb,KAA6B;AAAA;;AACpD,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBL,QAAQ,CAACG,WAAD,CAAhC;AACA,QAAMG,eAAe,GAAGP,MAAM,CAAC,EAAD,CAA9B,CAFoD,CAEhB;;AACpC,QAAM,CAACQ,OAAD,EAAUC,UAAV,IAAwBR,QAAQ,CAAC,IAAD,CAAtC;AACA,QAAM,CAACS,GAAD,EAAMC,MAAN,IAAgBV,QAAQ,CAC3B,+CAD2B,CAA9B,CAJoD,CAOpD;;AACA,QAAMW,SAAS,GAAGZ,MAAM,CAAC,IAAD,CAAxB;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACd;AACA,WAAO,MAAM;AACXa,MAAAA,SAAS,CAACC,OAAV,GAAoB,KAApB,CADW,CACgB;AAC5B,KAFD;AAGD,GALQ,EAKN,EALM,CAAT;;AAOAN,EAAAA,eAAe,CAACM,OAAhB,GAA0B,YAAY;AACpCJ,IAAAA,UAAU,CAAC,IAAD,CAAV;;AACA,QAAI;AACF,YAAMK,QAAQ,GAAG,MAAMjB,KAAK,CAACkB,GAAN,CAAUL,GAAV,CAAvB,CADE,CAEF;;AAEA,UAAIE,SAAJ,EAAe;AAAA;;AACZI,QAAAA,OAAO,CAAC,mBAAAF,QAAQ,CAACT,IAAT,kEAAeY,IAAf,KAAuB,EAAxB,CAAP;AACAR,QAAAA,UAAU,CAAC,KAAD,CAAV;AACF;AACF,KARD,CAQE,MAAM;AACNA,MAAAA,UAAU,CAAC,IAAD,CAAV;AACA,YAAM,IAAIS,KAAJ,CAAU,6BAAV,CAAN;AACD;AACF,GAdD;;AAgBAnB,EAAAA,SAAS,CAAC,MAAM;AACdQ,IAAAA,eAAe,CAACM,OAAhB;AACD,GAFQ,EAEN,CAACH,GAAD,CAFM,CAAT,CAjCoD,CAqCpD;AACA;AACA;;AAEA,SAAO;AACLC,IAAAA,MADK;AAELH,IAAAA,OAFK;AAGLS,IAAAA;AAHK,GAAP;AAKD,CA9CD;;GAAMf,gB;;AAgDN,eAAeA,gBAAf","sourcesContent":["import axios from \"axios\";\nimport React, { useEffect, useRef, useState } from \"react\";\n\nconst useHackerNewsAPI = (initialURL, initialData) => {\n  const [data, setData] = useState(initialData);\n  const handleFetchData = useRef({}); //useRef luu cac gia tri ben ngoai compo, o truong hop nay la query\n  const [loading, setLoading] = useState(true);\n  const [url, setUrl] = useState(\n    `https://hn.algolia.com/api/v1/search?query=''`\n  );\n  //useREf for hackerNEw\n  const isMounted = useRef(true);\n\n  useEffect(() => {\n    //\n    return () => {\n      isMounted.current = false; //khi compo bị unmount thì sẽ là giá trị false\n    };\n  }, []);\n\n  handleFetchData.current = async () => {\n    setLoading(true);\n    try {\n      const response = await axios.get(url);\n      // console.table(response.data.hits);\n\n      if (isMounted) {\n         setHits(response.data?.hits || []);\n         setLoading(false)\n      }\n    } catch {\n      setLoading(true);\n      throw new Error(\"something happened with api\");\n    }\n  };\n\n  useEffect(() => {\n    handleFetchData.current();\n  }, [url]);\n\n  // const handleUpdateQuery = lodash.debounce((e) => {\n  //   setQuery(e.target.value);\n  // }, 500);\n\n  return {\n    setUrl,\n    loading,\n    hits,\n  };\n};\n\nexport default useHackerNewsAPI;\n"]},"metadata":{},"sourceType":"module"}